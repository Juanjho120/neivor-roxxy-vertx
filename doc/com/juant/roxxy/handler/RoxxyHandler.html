<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="es">
<head>
<!-- Generated by javadoc (14.0.1) on Thu Aug 19 12:50:02 CST 2021 -->
<title>RoxxyHandler</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2021-08-19">
<meta name="description" content="declaration: package: com.juant.roxxy.handler, class: RoxxyHandler">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../script-dir/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../script-dir/jquery-3.4.1.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.js"></script>
</head>
<body class="class-declaration">
<script type="text/javascript">var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flexBox">
<header role="banner" class="flexHeader">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/RoxxyHandler.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="navListSearch"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="skipNav"><a id="skip.navbar.top">
<!--   -->
</a></div>
</nav>
</header>
<div class="flexContent">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">com.juant.roxxy.handler</a></div>
<h1 title="Class RoxxyHandler" class="title">Class RoxxyHandler</h1>
</div>
<div class="contentContainer">
<div class="inheritance" title="Inheritance Tree">java.lang.Object
<div class="inheritance">com.juant.roxxy.handler.RoxxyHandler</div>
</div>
<section class="description">
<hr>
<pre>public class <span class="typeNameLabel">RoxxyHandler</span>
extends java.lang.Object</pre>
<div class="block">Handles API routing for Roxxy</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Juan Tzun</dd>
</dl>
</section>
<section class="summary">
<ul class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li class="blockList">
<section class="constructorSummary"><a id="constructor.summary">
<!--   -->
</a>
<h2>Constructor Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E()">RoxxyHandler</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li class="blockList">
<section class="methodSummary"><a id="method.summary">
<!--   -->
</a>
<h2>Method Summary</h2>
<div class="memberSummary">
<div role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">All Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="tableTab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="tableTab" onclick="show(8);">Concrete Methods</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#defaultProcessorForRoxxyAPI(io.vertx.ext.web.RoutingContext)">defaultProcessorForRoxxyAPI</a></span>&#8203;(io.vertx.ext.web.RoutingContext&nbsp;routingContext)</code></th>
<td class="colLast">
<div class="block">Called for all default API HTTP GET, POST, PUT and DELETE.</div>
</td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code>io.vertx.ext.web.Router</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getAPISubRouter(io.vertx.core.Vertx)">getAPISubRouter</a></span>&#8203;(io.vertx.core.Vertx&nbsp;vertx)</code></th>
<td class="colLast">
<div class="block">Creates configuration for database connection and defines all available routes starting by /api/roxxy.</div>
</td>
</tr>
<tr class="altColor" id="i2">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getRoutingContextResponseByErrorCode(io.vertx.ext.web.RoutingContext,java.lang.Object,java.lang.String,java.lang.String)">getRoutingContextResponseByErrorCode</a></span>&#8203;(io.vertx.ext.web.RoutingContext&nbsp;routingContext,
java.lang.Object&nbsp;object,
java.lang.String&nbsp;codError,
java.lang.String&nbsp;message)</code></th>
<td class="colLast">
<div class="block">Creates routing context response according to codError parameter.</div>
</td>
</tr>
<tr class="rowColor" id="i3">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#makePaymentForCondominium(io.vertx.ext.web.RoutingContext)">makePaymentForCondominium</a></span>&#8203;(io.vertx.ext.web.RoutingContext&nbsp;routingContext)</code></th>
<td class="colLast">
<div class="block">Save the payment in Roxxy database and update the payment order state in Neivor database.</div>
</td>
</tr>
<tr class="altColor" id="i4">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#revertPaymentForCondominium(io.vertx.ext.web.RoutingContext)">revertPaymentForCondominium</a></span>&#8203;(io.vertx.ext.web.RoutingContext&nbsp;routingContext)</code></th>
<td class="colLast">
<div class="block">Revert payments according to an payment id.</div>
</td>
</tr>
<tr class="rowColor" id="i5">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#searchPaymentsByServiceCode(io.vertx.ext.web.RoutingContext)">searchPaymentsByServiceCode</a></span>&#8203;(io.vertx.ext.web.RoutingContext&nbsp;routingContext)</code></th>
<td class="colLast">
<div class="block">Payment order searching by service code (payment order code) and customer code.</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="inheritedList">
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a><code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li class="blockList">
<section class="constructorDetails"><a id="constructor.detail">
<!--   -->
</a>
<h2>Constructor Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="&lt;init&gt;()">RoxxyHandler</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="memberName">RoxxyHandler</span>()</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li class="blockList">
<section class="methodDetails"><a id="method.detail">
<!--   -->
</a>
<h2>Method Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="getAPISubRouter(io.vertx.core.Vertx)">getAPISubRouter</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">io.vertx.ext.web.Router</span>&nbsp;<span class="memberName">getAPISubRouter</span>&#8203;(<span class="arguments">io.vertx.core.Vertx&nbsp;vertx)</span></div>
<div class="block">Creates configuration for database connection and defines all available routes starting by /api/roxxy.
 The following APIs are available:
 <ul>
        <li>POST /api/condominium/search-payments (see searchPaymentsByServiceCode)</li>
        <li>POST /api/condominium/make-payment (see makePaymentForCondominium)</li>
        <li>DELETE /api/condominium/payment-reversion (see revertPaymentForCondominium)</li>
 </ul></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>vertx</code> - The entry point into the Vert.x Core API.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Router with Roxxy routes</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="defaultProcessorForRoxxyAPI(io.vertx.ext.web.RoutingContext)">defaultProcessorForRoxxyAPI</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">defaultProcessorForRoxxyAPI</span>&#8203;(<span class="arguments">io.vertx.ext.web.RoutingContext&nbsp;routingContext)</span></div>
<div class="block">Called for all default API HTTP GET, POST, PUT and DELETE.
 The process to be executed is as follows:
 <ol>
        <li>User and password validation</li>
        <li>Password validation</li>
        <li>User validation</li>
        <li>Entity validation</li>
        <li>Credentials validation</li>
 </ol></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>routingContext</code> - Represents the context for the handling of a request in Vert.x-Web.</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="searchPaymentsByServiceCode(io.vertx.ext.web.RoutingContext)">searchPaymentsByServiceCode</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">searchPaymentsByServiceCode</span>&#8203;(<span class="arguments">io.vertx.ext.web.RoutingContext&nbsp;routingContext)</span></div>
<div class="block">Payment order searching by service code (payment order code) and customer code. Payment order information is deployed in
 JSON format and it includes the payment order amount, customer name, customer code, service code and all fees (if apply).
 The process to be executed is as follows:
 <ol>
        <li>Body validation</li>
        <li>CodServicio and CodigoBusqueda format validation</li>
        <li>Customer code searching in Roxxy database</li>
        <li>Payment order code searching in Neivor database</li>
        <li>Searching payment order details in Neivor database</li>
        <li>Searching payment order fees in Neivor database if aplies</li>
 </ol></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>routingContext</code> - Represents the context for the handling of a request in Vert.x-Web.</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="makePaymentForCondominium(io.vertx.ext.web.RoutingContext)">makePaymentForCondominium</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">makePaymentForCondominium</span>&#8203;(<span class="arguments">io.vertx.ext.web.RoutingContext&nbsp;routingContext)</span></div>
<div class="block">Save the payment in Roxxy database and update the payment order state in Neivor database.
 The process to be executed is as follows:
 <ol>
        <li>Body validation</li>
        <li>CodigoBusqueda and FechaPago format validation</li>
        <li>Customer code searching in Roxxy database</li>
        <li>Payment order code and amount searching in Neivor database</li>
        <li>Payment order state validation (if it is not paid)</li>
        <li>If montoTotal is the same as payment order amount</li>
        <li>Create payment constancy in Roxxy database</li>
        <li>Recover transaction id of the payment constancy from Roxxy database</li>
        <li>Create payment constancy details for fees in Roxxy database (if applies)</li>
        <li>Update payment order state to paid in Neivor database</li>
 </ol></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>routingContext</code> - Represents the context for the handling of a request in Vert.x-Web.</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="revertPaymentForCondominium(io.vertx.ext.web.RoutingContext)">revertPaymentForCondominium</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">revertPaymentForCondominium</span>&#8203;(<span class="arguments">io.vertx.ext.web.RoutingContext&nbsp;routingContext)</span></div>
<div class="block">Revert payments according to an payment id. Deletes the payment in Roxxy database and update payment order state to false in Neivor database.
 The process to be executed is as follows:
 <ol>
        <li>Body validation</li>
        <li>CodigoBusqueda and FechaReversion format validation</li>
        <li>Reversion id validation (unique) in Roxxy database</li>
        <li>Payment id validation (if exists) in Roxxy database</li>
        <li>Customer code searching in Roxxy database</li>
        <li>Create reversion in Neivor database</li>
        <li>Recover reversion id from Neivor database</li>
        <li>Create reversion with reversion id from Neivor in Roxxy database</li>
        <li>Update payment order state to false in Neivor database</li>
        <li>Delete payment and payment fees in Roxxy database</li>
 </ol></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>routingContext</code> - Represents the context for the handling of a request in Vert.x-Web.</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getRoutingContextResponseByErrorCode(io.vertx.ext.web.RoutingContext,java.lang.Object,java.lang.String,java.lang.String)">getRoutingContextResponseByErrorCode</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">getRoutingContextResponseByErrorCode</span>&#8203;(<span class="arguments">io.vertx.ext.web.RoutingContext&nbsp;routingContext,
java.lang.Object&nbsp;object,
java.lang.String&nbsp;codError,
java.lang.String&nbsp;message)</span></div>
<div class="block">Creates routing context response according to codError parameter. Puts the following headers:
 <ul>
        <li>content-type: application/json</li>
        <li>codError: see error codes list below</li>
        <li>descripcion: error description</li>
 </ul></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>routingContext</code> - Represents the context for the handling of a request in Vert.x-Web.</dd>
<dd><code>object</code> - Load to be enconded prettily by Json for routing context</dd>
<dd><code>codError</code> - Custom error code for neivor. Can take the following values:
 <ul>
        <li><b>000</b>: PROCESO CONFORME (status code 200)</li>
        <li><b>201</b>: message (status code 404)</li>
        <li><b>401</b>: USUARIO Y CONTRASEÃ‘A NO PROPORCIONADOS (status code 401)</li>
        <li><b>402</b>: CONTRASEÃ‘A NO PROPORCIONADA (status code 401)</li>
        <li><b>403</b>: USUARIO NO PROPORCIONADO (status code 401)</li>
        <li><b>404</b>: ENTIDAD NO PROPORCIONADA (status code 401)</li>
        <li><b>405</b>: CREDENCIALES INVALIDAS (status code 401)</li>
        <li><b>501</b>: PROBLEMAS CON LA CONEXION + message (status code 404)</li>
        <li><b>502</b>: CARGA UTIL NO VALIDA (status code 400)</li>
        <li><b>503</b>: FORMATO NO VALIDO PARA + message (status code 400)</li>
 </ul></dd>
<dd><code>message</code> - Custom extra message for descripcion header</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
</div>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/RoxxyHandler.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</div>
</div>
</body>
</html>
